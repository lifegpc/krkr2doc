<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN">
<!-- generated by to_html.pl from DispBase.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>显示背景</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="吉里吉里相关参考用标准样式" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="首页" />
</head>
<body>
<h1><a id="id25" name="id25">显示背景</a>
</h1><div class="para"><div>
　<a id="id26" name="id26" class="targanchor"><dfn>背景</dfn></a>就是显示在文字和前景后面的东西。在KAG中，(默认情况下)会加载640×480大小的图像作为背景。<br />
<br />
　试着将一张你想要显示的640×480图像放在bgimage文件夹中。假设这张图像是bg0.jpg。KAG的LZH文件中不包含这个图像，所以请自行准备一张(^^)<br />
　然后，将<a target="main" class="jump" href="Letter.html">显示文字</a>中使用的脚本修改如下：<br />

<br />
<code class="bq"><em>[image&nbsp;storage=&quot;bg0&quot;&nbsp;page=fore&nbsp;layer=base]</em><br />
[wait&nbsp;time=200]<br />
*start|开始<br />
[cm]<br />
你好。<br />
</code>
<br />

　这里使用<a id="id27" name="id27" class="targanchor"><dfn>image</dfn></a>标签，将bg0.jpg加载到表页的背景层中。<br />
　image标签的storage属性指定要加载的文件，可以省略扩展名。KAG会自动寻找相应的文件(^^)<br />
<br />
　请先试着执行一下。<br />
<br /><div class="descimg"><img width="325" height="265" alt="BG_Displayed.jpg" src="BG_Displayed.jpg" /><br />显示背景</div><br />　那么，什么是"表页"和"背景层"呢？<br />
<br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">注意</span></div>
　如果在Config.tjs中通过scWidth和scHeight指定了640x480以外的屏幕尺寸，请确保使用与该尺寸相匹配的背景图像。<br />
</div><br />
</div></div>
<h1><a id="id28" name="id28">KAG的层结构</a>
</h1><div class="para"><div>
　KAG或者说吉里吉里中，屏幕完全由称为"层"的元素叠加而成（类似于Photoshop等的图层；将"图层"写作"层"是作者的习惯）。<br />
<br />
<br />
　例如，如果显示如下画面...<br />
<br />
<br /><div class="descimg"><img width="480" height="360" alt="Layers.jpg" src="Layers.jpg" /><br />显示示例</div><br /><br />
　层结构如下所示。<br />
<br />
<br /><div class="descimg"><img width="483" height="452" alt="LayersDesc.jpg" src="LayersDesc.jpg" /><br />层结构</div><br /><br />
　在KAG中，首先有一个<a id="id29" name="id29" class="targanchor"><dfn>背景层</dfn></a> base，显示在最后面（最下层）。在它前面（上层）有3个<a id="id30" name="id30" class="targanchor"><dfn>前景层</dfn></a> 0 1 2。更靠前（上层）有2个<a id="id31" name="id31" class="targanchor"><dfn>消息层</dfn></a>。所有前景层和消息层1在初始状态下都是不可见的（通过layopt标签设置visible=true可以使不可见的层变为可见。对于前景层，也可以使用image标签使其可见）。<br />
　在KAG中，这样的层结构有两组，分别称为<a id="id32" name="id32" class="targanchor"><dfn>表页</dfn></a> fore和<a id="id33" name="id33" class="targanchor"><dfn>裏页</dfn></a> back。表页显示在屏幕上，而裏页不会显示在屏幕上。裏页主要用于过渡效果（画面切换），临时存放图像。<br />
<br />
　image标签的page属性和layer属性分别指定是表页还是裏页（fore / back），以及是背景层还是前景层（base / 0 / 1 / 2）。<br />
<br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">注意</span></div>
　3个前景层和2个消息层的数量是Config.tjs中的默认设置。<br />
　消息层和前景层的初始数量可以在Config.tjs中通过numCharacterLayers和numMessageLayers指定，也可以在运行时使用laycount标签进行更改。<br />
</div><br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">注意</span></div>
　"背景"、"前景"、"表"、"裏"这些术语容易混淆，但page属性中指定的fore表示"表画面"，而不是表示"前景层"。<br />
　表页还是裏页通过page属性分别用fore、back指定，前景层时layer属性指定0 1 2...，背景层时指定base。<br />
</div><br />
</div></div>
	<script type="text/javascript" charset="UTF-8" src="documentid.js" ></script>
	<script type="text/javascript" charset="UTF-8" src="postcontent.js" ></script>
</body>
</html>
