<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN">
<!-- generated by to_html.pl from variable.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>变量</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="吉里吉里相关参考用标准样式" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="首页" />
</head>
<body>
<h1><a id="id431" name="id431">变量</a>
</h1><div class="para"><div>
　TJS2 的变量使用 <a id="id432" name="id432" class="targanchor"><dfn>var</dfn></a> 关键字指定。在TJS2中，必须声明变量才能使用。<br />
　var 关键字的格式如下：<br />

<br />
<code class="bq">　var&nbsp;变量名;<br />
</code>
<br />

　变量名可以用 <a id="id433" name="id433" class="targanchor"><dfn>,</dfn></a> (逗号)分隔来指定多个。如果变量需要初始值，可以用<br />

<br />
<code class="bq">　var&nbsp;变量名&nbsp;=&nbsp;初始值;<br />
</code>
<br />

　这种格式给变量赋初始值。<br />

<br />
<code class="bq"><span class="weak">例:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;variable=0;<br />
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;var2=variable+2;<br />
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;var3=&quot;this&nbsp;is&nbsp;var3.&quot;;<br />
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;var1,var2,var3;<br />
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;a=0,b=1,c=3;<br />
</code>
<br />

<br />
　声明变量时不需要指定类型。变量类型取决于赋给它的值的类型。此外，在计算过程中或根据上下文，类型会自动转换。<br />
</div></div>
<h1><a id="id434" name="id434">变量名</a>
</h1><div class="para"><div>
　所有有效的标识符都可以作为变量名。<br />

<br />
<code class="bq"><span class="weak">例:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;ampan;<br />
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;123a;&nbsp;&nbsp;<span class="comment">//&nbsp;数字在开头所以不行</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;function;&nbsp;<span class="comment">//&nbsp;function&nbsp;是保留字所以不行</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;function1;&nbsp;<span class="comment">//&nbsp;包含保留字但不是保留字本身所以可以</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;变量其一;&nbsp;<span class="comment">//&nbsp;也可以使用全角字符</span><br />
</code>
<br />

</div></div>
<h1><a id="id435" name="id435">变量的重复声明</a>
</h1><div class="para"><div>
　多次声明同名变量不会产生错误。但是，如果在第二次或之后的声明中指定了初始值，该初始值将被赋给变量。如果第二次或之后的声明没有提供初始值，则变量值将变为void。<br />

<br />
<code class="bq"><span class="weak">例:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;a=0;<br />
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;a;&nbsp;<span class="comment">//&nbsp;第二次声明（不会出错，a变为void）</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;a=-1;&nbsp;<span class="comment">//&nbsp;第三次声明（不会出错，但a被赋值为-1）</span><br />
</code>
<br />

</div></div>
<h1><a id="id436" name="id436">变量的作用域</a>
</h1><div class="para"><div>
　在{  }（代码块）内声明的变量只在该代码块内有效，即成为<a id="id437" name="id437" class="targanchor"><dfn>局部变量</dfn></a>。<br />
　此外，与C语言不同，变量可声明的位置没有限制。<br />

<br />
<code class="bq"><span class="weak">例:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;while(t--)<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;ratio=t/all;&nbsp;<span class="comment">//&nbsp;声明变量'ratio'</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setRatio(ratio);<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;当控制到达这里时，'ratio'已被删除</span><br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;test;&nbsp;<span class="comment">//&nbsp;在这里也可以声明变量</span><br />
</code>
<br />

<br />
　另外，如果在代码块内声明的变量与代码块外的变量同名，在该代码块内只能访问新声明的变量。<br />

<br />
<code class="bq"><span class="weak">例:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;ratio=0;<br />
&nbsp;&nbsp;&nbsp;&nbsp;if(flag)<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;ratio;&nbsp;<span class="comment">//&nbsp;与代码块外声明的变量同名的变量</span><br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ratio=buf.position&nbsp;/&nbsp;buf.totalTime;&nbsp;<span class="comment">//&nbsp;只能访问代码块内的ratio</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setRatio(ratio);<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;离开代码块后，代码块内的ratio被删除，但代码块外的ratio保持不变</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;ratio=-1;<br />
</code>
<br />

<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
　在所有作用域之外（这称为全局作用域）用var声明的变量将成为全局对象的成员。<br />
</div><br />
</div></div>
	<script type="text/javascript" charset="UTF-8" src="documentid.js" ></script>
	<script type="text/javascript" charset="UTF-8" src="postcontent.js" ></script>
</body>
</html>
