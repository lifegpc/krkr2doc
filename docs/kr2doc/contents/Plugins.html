<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN">
<!-- generated by to_html.pl from Plugins.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>关于插件</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="吉里吉里相关参考用标准样式" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="首页" />
</head>
<body>
<h1><a id="id205" name="id205">什么是插件</a>
</h1><div class="para"><div>
　用于连接吉里吉里，扩展吉里吉里功能。<br />
　目前阶段，吉里吉里可用的插件类型有3种，<br />
<ul><li>Susie插件（图像读取和档案访问）</li><li>用于扩展WaveSoundBuffer可播放格式的插件</li><li>其他吉里吉里专用插件</li></ul>　<br />
<br />
　使用插件时，需要使用<a target="main" class="jump" href="f_Plugins_link.html">Plugins.link</a>方法连接到吉里吉里本体。<br />
</div></div>

<h1><a id="id206" name="id206">插件搜索</a>
</h1><div class="para"><div>
　<a target="main" class="jump" href="f_Plugins_link.html">Plugins.link</a>方法会按以下顺序搜索指定的插件：<br />
<ol><li>与吉里吉里本体相同的文件夹</li><li>与吉里吉里本体相同文件夹下的plugin文件夹内</li><li>自动搜索路径</li></ol><br />
　如果自动搜索路径位于档案内等无法作为本地文件访问的位置，吉里吉里会尝试将插件展开到<em>与吉里吉里本体相同的文件夹</em>。这可能会导致问题，因此<em>强烈建议</em>将插件放在"与吉里吉里本体相同的文件夹"或"与吉里吉里本体相同文件夹下的plugin文件夹内"。<br />
　此外，吉里吉里的配置工具（Releaser或krkrconf.exe、-userconf选项、引擎设置.exe）会搜索插件以收集每个插件的嵌入选项信息，其搜索顺序如下：<br />
<ol><li>与吉里吉里本体相同的文件夹</li><li>与吉里吉里本体相同文件夹下的plugin文件夹内</li></ol><br />
　吉里吉里的配置工具不会搜索自动搜索路径，因此包含设置项的插件必须放在"与吉里吉里本体相同的文件夹"或"与吉里吉里本体相同文件夹下的plugin文件夹内"。<br />
</div></div>
<h1><a id="id207" name="id207">插件自动加载</a>
</h1><div class="para"><div>
　吉里吉里具有自动搜索并在启动时加载插件的功能。如果要自动加载插件，需要将插件的扩展名从dll更改为tpm。<br />
　吉里吉里在启动时（执行startup.tjs之前）会从以下文件夹搜索扩展名为tpm的文件，并自动加载为插件：<br />
<ul><li>与吉里吉里本体相同的文件夹</li><li>与吉里吉里本体相同文件夹下的plugin文件夹内</li></ul><br />
　吉里吉里会按名称升序排列找到的插件，并按该顺序加载插件。例如，aaa.tpm会比aab.tpm先加载。这不受插件所在文件夹的影响，只受插件名称的影响（即使在与吉里吉里本体相同的文件夹中有z.tpm，只要plugin文件夹内有a.tpm，a.tpm也会先加载）。如果要规定插件的加载顺序，需要更改插件的文件名。<br />
</div></div>
<h1><a id="id208" name="id208">关于创建插件</a>
</h1><div class="para"><div>
　吉里吉里源代码中包含了吉里吉里附带插件的源代码，请参考这些。<br />
　目前阶段，"其他吉里吉里专用插件"的规格<em>尚未确定</em>。将来规格更改时，源代码级别的兼容性应该能够保持，即使二进制级别的兼容性丢失，只要根据吉里吉里本体重新构建，应该仍然可以使用。<br />
</div></div>
<h1><a id="id209" name="id209">关于Susie插件</a>
</h1><div class="para"><div>
　可以利用Takechin氏制作的图像查看器"Susie32"的插件。<br />
　可以使用00IN格式（图像插件）和00AM格式（档案插件），但有以下限制或吉里吉里特有的规格：<br />
<br />
<ul><li>吉里吉里通过扩展名判断图像格式，因此无法适应带有与原始扩展名（GetPluginInfo函数返回的）不同扩展名的图像（档案会检查所有支持的格式，所以即使扩展名不同也没问题）</li><li>32bpp位图被视为带有alpha通道的位图</li><li>某些位图格式无法接受（如RLE压缩或指定了BITFIELDS的位图）</li><li>通过Susie插件进行图像读取或档案访问，性能比吉里吉里原生处理的图像格式或xp3档案要低得多</li><li>档案中的文件会展开到内存中，因此不适合处理大文件</li><li>不支持档案内嵌档案</li><li>不支持Mac binary</li></ul><br />
　此外，在不完全符合Susie插件规格的插件中，存在一些与吉里吉里兼容性不佳的插件。<br />
</div></div>
<h1><a id="id210" name="id210">关于吉里吉里附带的插件</a>
</h1><div class="para"><div>
　吉里吉里标准附带的插件说明。<br />
<br />
<dl>
<dt><a id="id211" name="id211" class="targanchor"><dfn>wuvorbis.dll</dfn></a></dt>
<dd>　使<a id="id212" name="id212" class="targanchor"><dfn>OggVorbis</dfn></a>在吉里吉里中可播放的插件。</dd>
<dt><a id="id213" name="id213" class="targanchor"><dfn>wumsadp.dll</dfn></a></dt>
<dd>　使<a id="id214" name="id214" class="targanchor"><dfn>Microsoft ADPCM</dfn></a>格式的.wav文件在吉里吉里中可播放的插件。</dd>
<dt><a id="id215" name="id215" class="targanchor"><dfn>wutcwf.dll</dfn></a></dt>
<dd>　使<a id="id216" name="id216" class="targanchor"><dfn>TCWF</dfn></a>格式的文件在吉里吉里中可播放的插件。</dd>
<dt><a id="id217" name="id217" class="targanchor"><dfn>extrans.dll</dfn></a></dt>
<dd>　扩展吉里吉里本体过渡效果种类的插件，连接到吉里吉里本体后可使用多种过渡效果。<br />
　关于此插件的使用方法，请参考<a target="main" class="jump" href="Transition.html">关于过渡效果</a>。</dd>
<dt><a id="id218" name="id218" class="targanchor"><dfn>dirlist.dll</dfn></a></dt>
<dd>　获取指定目录内文件列表的插件。<br />
　连接此插件后，可以使用<a id="id219" name="id219" class="targanchor"><dfn>getDirList</dfn></a>函数。<br />
<code class="inlinecode">getDirList(目录)</code><br />
　以此形式指定后，会以数组形式返回该目录内所有文件的列表。此列表也包括目录，如果是目录，
则字符串元素的末尾会带有'/'。<br />
　此外，此列表通常包含'./'和'../'两个元素。<br />
　此函数只获取指定目录直接下层的文件列表，不会递归获取更下层目录的文件。</dd>
<dt><a id="id220" name="id220" class="targanchor"><dfn>fftgraph.dll</dfn></a></dt>
<dd>　与WaveSoundBuffer同步，显示简易频谱分析器的插件。<br />
　连接此插件后，可以使用<a id="id221" name="id221" class="targanchor"><dfn>drawFFTGraph</dfn></a>函数。<br />
　使用方法请参考吉里吉里源代码中的fftgraph源代码及KAG用频谱分析器插件。</dd>
<dt><a id="id222" name="id222" class="targanchor"><dfn>win32ole.dll</dfn></a></dt>
<dd>　用于在吉里吉里窗口中粘贴ActiveX控件，或从吉里吉里操作支持OLE自动化的对象的插件。<br />
　使用此插件，可以例如在吉里吉里窗口中粘贴Web浏览器（Internet Explorer）或媒体播放器，或从吉里吉里操作Excel等。<br />
　使用方法请参考吉里吉里源代码中的<a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/src/plugins/win32/win32ole/manual.tjs">kirikiri2/trunk/kirikiri2/src/plugins/win32/win32ole/manual.tjs</a>及<a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/tests/win32ole">kirikiri2/trunk/kirikiri2/tests/win32ole</a>目录。<br />
</dd>
<dt><a id="id223" name="id223" class="targanchor"><dfn>wsh.dll</dfn></a> (experimental)</dt>
<dd>　使吉里吉里能够使用JScript、VBScript、PerlScript的插件（RubyScript的运行仍在调整中）。<br />
　连接此插件后，<a target="main" class="jump" href="f_Scripts_exec.html">Scripts.exec</a>和<a target="main" class="jump" href="f_Scripts_execStorage.html">Scripts.execStorage</a>会被扩展。<br />
　Scripts.exec的第二参数将接受扩展名、ProgId或CLSID。Scripts.execStorage也会像Scripts.exec一样在第二参数接受扩展名、ProgId或CLSID，但如果省略第二参数，则会从第一参数的扩展名决定语言。<br />
　扩展名为js、vbs、pl、rb之一，ProgId分别为JScript、VBScript、PerlScript、RubyScript。指定CLSID时，需要指定脚本引擎的类ID。如果传递了这些以外的扩展名，则会作为TJS脚本执行。<br />
　使用方法请参考吉里吉里源代码中的<a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/tests/wsh">kirikiri2/trunk/kirikiri2/tests/wsh</a>目录。<br />
</dd>

<dt><a id="id224" name="id224" class="targanchor"><dfn>agg.dll</dfn></a> (experimental)</dt>
<dd>　在吉里吉里中使用<a class="jump" href="http://www.antigrain.com/">AGG (Anti-Grain Geometry)</a>进行图形绘制的插件。<br />
　可以使用简易的SVG读取/绘制功能。<br />
　要绘制SVG，例如
<br />
<code class="bq"><span class="weak">例:</span><br />var&nbsp;svg&nbsp;&nbsp;=&nbsp;new&nbsp;AGGPrimitive(layer,&nbsp;&quot;SVG&quot;,&nbsp;&quot;tiger.svg&quot;);<br />
var&nbsp;svg1&nbsp;=&nbsp;new&nbsp;AGGPrimitive(layer,&nbsp;&quot;SVG&quot;,&nbsp;&quot;tiger.svg&quot;);<br />
</code>
<br />

（由于原AGG的SVG读取支持的限制，很多SVG不能读取）。<br />
　详情请参考吉里吉里源代码中的<a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/src/plugins/win32/layerExAgg/">kirikiri2/trunk/kirikiri2/src/plugins/win32/layerExAgg</a>目录。<br />
</dd>


<dt><a id="id225" name="id225" class="targanchor"><dfn>csvParser.dll</dfn></a> (experimental)</dt>
<dd>　在吉里吉里中读取CSV（逗号分隔值）文件的插件。<br />
　详情请参考吉里吉里源代码中的<a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/src/plugins/win32/csvParser/">kirikiri2/trunk/kirikiri2/src/plugins/win32/csvParser</a>目录。<br />
</dd>


<dt><a id="id226" name="id226" class="targanchor"><dfn>expat.dll</dfn></a> (experimental)</dt>
<dd>　在吉里吉里中通过<a class="jump" href="http://expat.sourceforge.net/">Expat</a>读取XML文件的插件。<br />
　详情请参考吉里吉里源代码中的<a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/src/plugins/win32/expat/">kirikiri2/trunk/kirikiri2/src/plugins/win32/expat</a>目录。<br />
</dd>


<dt><a id="id227" name="id227" class="targanchor"><dfn>json.dll</dfn></a> (experimental)</dt>
<dd>　在吉里吉里中读取<a class="jump" href="http://www.json.org/">JSON</a>的插件。<br />
　详情请参考吉里吉里源代码中的<a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/src/plugins/win32/json/">kirikiri2/trunk/kirikiri2/src/plugins/win32/json</a>目录。<br />
</dd>

<dt><a id="id228" name="id228" class="targanchor"><dfn>layerExImage.dll</dfn></a> (experimental)</dt>
<dd>　对图层进行亮度和对比度调整、色相和饱和度调整、添加噪点的插件。<br />
　详情请参考吉里吉里源代码中的<a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/src/plugins/win32/layerExImage/">kirikiri2/trunk/kirikiri2/src/plugins/win32/layerExImage</a>目录。<br />
</dd>

<dt><a id="id229" name="id229" class="targanchor"><dfn>perspective.dll</dfn></a> (experimental)</dt>
<dd>　进行图层透视变换的插件。<br />
　详情请参考吉里吉里源代码中的<a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/src/plugins/win32/layerExPerspective/">kirikiri2/trunk/kirikiri2/src/plugins/win32/layerPerspective</a>目录。<br />
</dd>


<dt><a id="id230" name="id230" class="targanchor"><dfn>saveStruct.dll</dfn></a></dt>
<dd>使Array/Dictionary的saveStruct处理能够使用当前代码页或UTF-8而非Unicode（UTF-16）输出。<br />
　详情请参考吉里吉里源代码中的<a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/src/plugins/win32/saveStruct/">kirikiri2/trunk/kirikiri2/src/plugins/win32/saveStruct</a>目录。<br />
</dd>


<dt><a id="id231" name="id231" class="targanchor"><dfn>fstat.dll</dfn></a></dt>
<dd>为Storages类添加获取文件大小和更新日期等信息的方法，以及从存储系统中提取文件的方法。
　详情请参考吉里吉里源代码中的<a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/src/plugins/win32/fstat/">kirikiri2/trunk/kirikiri2/src/plugins/win32/fstat</a>目录。<br />
</dd>

<dt><a id="id232" name="id232" class="targanchor"><dfn>clipboardEx.dll</dfn></a>(experimental)</dt>
<dd>为Clipboard类添加通过剪贴板交换图像和TJS表达式的功能，以及注册自动检测剪贴板更新的处理程序的功能。
　详情请参考吉里吉里源代码中的<a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/src/plugins/win32/clipboardEx/">kirikiri2/trunk/kirikiri2/src/plugins/win32/clipboardEx</a>目录。<br />
</dd>



</dl><br />
</div></div>
	<script type="text/javascript" charset="UTF-8" src="documentid.js" ></script>
	<script type="text/javascript" charset="UTF-8" src="postcontent.js" ></script>
</body>
</html>
